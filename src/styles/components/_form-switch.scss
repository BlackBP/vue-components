@import "../mixins/form-switches";

.c-switch {
  $self: #{&};
  $label: #{$self}__label;
  $content: #{$self}__content;
  $toggle: #{$self}__toggle;
  $toggle-track: #{$toggle}-track;
  $toggle-knob: #{$toggle}-knob;
  $toggle-knob-shadow: #{$toggle-knob}-shadow;

  @at-root {
    #{$self} {
      @include switches-style;

      &:hover,
      &:focus {
        #{$toggle-knob} {
          box-shadow: $switches-toggle-shadow;
        }

        #{$toggle-knob-shadow} {
          opacity: 1;
          transform: scale(2);
        }
      }

      &:active {
        #{$toggle-knob-shadow} {
          background-color: $switches-shadow-press-color;
        }
      }

      &.is-active {
        &:active {
          #{$toggle-knob-shadow} {
            background-color: $switches-active-shadow-press-color;
          }
        }

        #{$toggle-track} {
          background-color: $switches-active-color;
        }

        #{$toggle-knob} {
          color: $switches-active-color;
          transform: translateX($switch-track-width - $switch-knob-size);
        }

        #{$toggle-knob-shadow} {
          background-color: $switches-active-shadow-color;
        }
      }
    }

    #{$label} {
      @include switches-label;
    }

    #{$content} {
      @include switches-content;
    }

    #{$toggle} {
      flex: 0 0 auto;
      position: relative;
      z-index: 0;
      display: block;
      width: $switch-track-width;
      height: 1em;
      font-size: $switches-toggle-size;
    }

    #{$toggle-track} {
      position: absolute;
      z-index: 0;
      top: 50%;
      transform: translateY(-50%);
      display: block;
      width: $switch-track-width;
      height: $switch-track-height;
      border-radius: $switch-track-height / 2;
      background-color: $switches-color;
      font-size: inherit;
      outline: none;
      cursor: pointer;
      transition: background-color $switch-track-transition;
    }

    #{$toggle-knob} {
      position: relative;
      z-index: 1;
      display: block;
      width: 1em;
      height: 1em;
      font-size: $switch-knob-size;
      border-radius: .5em;
      color: $switches-color;
      transform: translateX(0px);
      transition: transform $switch-knob-transition;

      &:before {
        position: relative;
        z-index: 2;
        content: '';
        display: block;
        width: 100%;
        height: 100%;
        background-color: #fff;
        border: .1em solid currentColor;
        border-radius: 50%;
      }
    }

    #{$toggle-knob-shadow} {
      @include switches-toggle-shadow;
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }

  }

}
